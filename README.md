### Сторонние библиотеки:
pip install pytest-playwright
pip install python-dotenv  
pip install uvicorn  
pip install fastapi  
pip install jinja2  
pip install aiofiles 

```playwright install chromium``` (чтобы установить драйвер для playwright, выполнить 1 раз)

### Как пользоваться:
1. Устанавливаем все библиотеки + драйвер (выполнить все команды выше)
2. Заполняем .env файл в соответствии с .env.example и создаём соответствующие директории:
    * PATH_TO_CHROME_PROFILE - директория с кэшем хрома
    * DOWNLOAD_DIRECTORY - директория с загрузками (программно очищается)

    \*директории можно создать в корне проекта и назвать chrome_data и downloads, поскольку занесены в .gitignore
3. В корне проекта выполняем ```uvicorn main:app --reload --port 8000```
4. Заходим в браузер на 127.0.0.1:8000
5. Чтобы вкл/выкл отображение окна в функции initialize_browser (в файле /utils/tinkoff/browser_manager.py) в строчке ```headless=True``` пишем ```True``` - для отображения окна, ```False``` - для скрытия окна

### 09.10.24
Добавлено:
* реагирование на различные виды входа
* обработка ошибок
* разделение приложения по файлам
* получение входной информации через .env файл, пример в .env.example
* сохранение сессий входа

Проблемы:
* приложение зависает примерно на 10 секунд при создании OTP перед вводом пароля

### 15.10.24
Исправлено:
* приложение теперь не зависает

### 24.10.24
Добавлено:
* Приложение работает на фастапи
* Есть отдельная папка (HTML-Example) с примером использования

Проблемы:
* ~~Долгий сбор расходов и незавершенная таблица~~
* ~~Некорректный расчет общей суммы доходов если были переводы между счетами~~
* ~~Долгое определение типа страницы~~
* ~~Пароль не стирается в браузере селениума при неверном вводе~~
* Работа приложения не изолирована для конкретного пользователя
* Есть много мест где надо лучше обработать ошибки
* Оказалось что драйвер лучше заранее установить, иначе часто возникают проблемы при автоматической загрузке 

Нужно добавить:
* Работу с бд (запись отредактированных данных в бд и их извлечение)
* Исправить все проблемы

### 03.11.24
Добавлено:
* Взаимодействие с браузером переписано под playwright
* Добавлено взаимодействие между фронтом и бэком через jinja2
* Проект структурирован по папкам
* Наложены стили на страницы

Исправленные проблемы:
* ~~Долгий сбор расходов и незавершенная таблица~~
* ~~Некорректный расчет общей суммы доходов если были переводы между счетами~~
* ~~Долгое определение типа страницы~~
* ~~Пароль не стирается в браузере селениума при неверном вводе~~
* Работа приложения будет изолирована на другом этапе
* Обработка ошибок всё ещё требует внимания
* Драйвер теперь устанавливается через команду ```playwright install chromium``` во время установки других зависимостей

Добавить/изменить:
* Переход с расходов на вход (например, если в браузере у тинькофф закончилась сессия, а пользователь выбирает новый период расходов, то нужно перевести его снова на вход)
* Убрать спам кнопок
* Доделать статьи + бд
* Проработать страницы:
    * при нажатии кнопки "отправить" она поднимается немного выше
    * расстояние между кнопками на расходах
    * список статье слишком узкий
    * при входе на страницу ввода смс видно кнопку повторной отправвки